window.addEventListener("load",()=>{let e,t;document.querySelector(".weather");const o=document.querySelector("#Button"),n=document.querySelector("#temp"),l=document.querySelector("#humidity"),a=document.querySelector("#forecast"),r=document.querySelector("#location");var c=new Skycons({monochrome:!1,color:{sun:"#F00"}});function i(o){fetch(`https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/5da8d867cfc8f3f7a644644fe4cd0577/${e},${t}`).then(e=>200!==e.status?(console.log("Looks like there was a problem. Status Code: "+e.status),void $(".weather").toggleClass("hideWeather",!0)):e.json()).then(e=>{console.log(e);const{temperature:t,humidity:i,icon:s}=e.currently;let d=e.daily.summary;window.apiForecast=d,console.log(d),window.globalTemp=t;let u=s.replace(/-/g,"_").toUpperCase();if(c.color.light_cloud="#00BFFF",c.play(),c.add("icon1",u),o)r.textContent=o;else{let t=e.timezone;t=(t=t.replace(/_/g," ")).replace(/\//g,":"),r.textContent=t}n.textContent=Math.ceil(t)+"°F",l.textContent=Math.round(100*i)+"%",a.textContent=d})}navigator.geolocation&&navigator.geolocation.getCurrentPosition(l=>{e=l.coords.latitude,t=l.coords.longitude,i(),o.addEventListener("change",()=>{if(o.checked){n.textContent=Math.floor((globalTemp-32)*(5/9))+"°C";let e=apiForecast.split(" ");for(let t=0;t<e.length;t++)if(e[t].includes("°F")){let o=e[t].substr(0,e[t].indexOf("°F"));o=Math.floor(5/9*(o-32))+"°C",e[t]=o,console.log(o)}a.textContent=e.join(" ")}else n.textContent=Math.ceil(globalTemp)+"°F"})},l=>{e=43.653908,t=-79.384293,errorMsg="Location could not be determined Default city: Toronto",i(errorMsg),o.addEventListener("change",()=>{if(o.checked){n.textContent=Math.floor((globalTemp-32)*(5/9))+"°C";let e=apiForecast.split(" ");for(let t=0;t<e.length;t++)if(e[t].includes("°F")){let o=e[t].substr(0,e[t].indexOf("°F"));o=Math.floor(5/9*(o-32))+"°C",e[t]=o,console.log(o)}a.textContent=e.join(" ")}else n.textContent=Math.ceil(globalTemp)+"°F",a.textContent=apiForecast})},{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!0})});